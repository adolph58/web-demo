<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery.js"></script>
</head>
<body>
<div class="cookie"></div>
<button class="getBookInfo">请求8002</button>
<button class="getHello">请求8003</button>
<button class="sendPost">发送post请求</button>
<table class="table">
    <th>姓名</th>
    <th>密码</th>
</table>
<div class="get"></div>
</body>
<script type="text/javascript">

	$.ajax({
        type: 'get',
        url: 'http://localhost:8002/book/info/23',
        success: function (data) {
            //let str = JSON.stringify(data)
            //$('.get').text(str)
            //console.log(data)
			if(data.startWith("<!")) {
				window.location.href="http://localhost:8000/auth/login";
			} else {
				alert(data.data..name);
			}
        }
    })

    $('.getBookInfo').click(function () {
        $.ajax({
            type: 'get',
            url: 'http://localhost:8002/book/info/23',
            success: function (data) {
                let str = JSON.stringify(data)
                $('.get').text(str)
                console.log(data)
            }
        })
    })
	
	$('.getHello').click(function () {
        $.ajax({
            type: 'get',
            url: 'http://localhost:8003/hello',
            success: function (data) {
                let str = JSON.stringify(data)
                $('.get').text(str)
                console.log(data)
            }
        })
    })
	
    $('.sendPost').click(function () {
        $.ajax({
            type: 'post',
            contentType: 'application/json',
            headers: {
                'X-CSRF-TOKEN': _csrf
            },
            xhrFields: {
                withCredentials: true
            },
            url: 'http://127.0.0.1:9002/appa/user/getUserList',
            data: '',
            success: function (data) {
                let mydata = data['data']
                mydata.forEach((val) => {
                    let tr = $('<tr></tr>')
                    let td = $('<td>' + val.username + '</td>')
                    let td2 = $('<td>' + val.password + '</td>')
                    $(tr).append(td)
                    $(tr).append(td2)
                    $('.table').append(tr)
                })
                console.log(data)
            }
        })
    })

</script>
</html>